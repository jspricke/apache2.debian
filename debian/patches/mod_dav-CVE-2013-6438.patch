# commit 9ea49621699c2a5ead8bc9ffb8afa6167d31a826
# Author: Ruediger Pluem <rpluem@apache.org>
# Date:   Wed Mar 12 11:50:49 2014 +0000
#
#    Merge r1556428 from trunk:
#    
#    mod_dav: Keep track of length of cdata properly when removing leading spaces.
#    
#    * modules/dav/main/util.c
#      (dav_xml_get_cdata): reduce len variable when increasing cdata pointer.
#    
#    Submitted by: Amin Tora <Amin.Tora neustar.biz>
#    
#    Reviewed by: breser, rpluem, gstein, wrowe
#    
#    
#    git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.2.x@1576706 13f79535-47bb-0310-9956-ffa450edef68
#
diff --git a/modules/dav/main/util.c b/modules/dav/main/util.c
index ddbd621..ba856fa 100644
--- a/modules/dav/main/util.c
+++ b/modules/dav/main/util.c
@@ -372,8 +372,10 @@ DAV_DECLARE(const char *) dav_xml_get_cdata(const apr_xml_elem *elem, apr_pool_t
 
     if (strip_white) {
         /* trim leading whitespace */
-        while (apr_isspace(*cdata))     /* assume: return false for '\0' */
+        while (apr_isspace(*cdata)) {     /* assume: return false for '\0' */
             ++cdata;
+            --len;
+        }
 
         /* trim trailing whitespace */
         while (len-- > 0 && apr_isspace(cdata[len]))
